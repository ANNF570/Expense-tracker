<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Spendora — Dashboard</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="stylesheet" href="style.css">

    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#111133" />

    <link rel="icon" type="image/png" sizes="192x192" href="/assets/icon-192.png" />
    <link rel="icon" type="image/png" sizes="512x512" href="/assets/icon-512.png" />


    <!-- ChartJS -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Firebase (compat mode as used across your project) -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>

    <!-- jsPDF + AutoTable for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
</head>

<body>
    <div class="container">

        <!-- HEADER -->
        <div class="card header">

            <!-- LEFT: BRAND LOGO + NAME -->
            <div class="brand">
                <img src="assets/only_logo.png" class="app-logo" alt="Spendora Logo" style="width:48px;height:48px;border-radius:8px;" />
                <div style="margin-left:10px;">
                    <div class="app-title" style="font-weight:800;">Spendora</div>
                    <div class="app-sub" style="opacity:0.85;font-size:13px;">Real-time dashboard</div>
                </div>
            </div>

            <!-- RIGHT SIDE -->
            <div class="right-controls" style="display:flex;align-items:center;gap:10px;">
                <!-- Currency -->
                <select id="currency" class="select" onchange="setCurrency(this.value)">
          <option value="INR">₹ INR</option>
          <option value="USD">$ USD</option>
          <option value="EUR">€ EUR</option>
        </select>

                <!-- User Email -->
                <span id="userEmail" class="user-email" style="font-weight:700;"></span>

                <!-- Neon Buttons -->
                <button class="neon-btn" onclick="location.href='profile.html'">Profile</button>
                <button class="neon-btn danger" onclick="signOut()">Logout</button>
                <button id="installBtn" style="padding:8px 18px; border-radius:10px; background:#00f2fe; color:#000;border:none;cursor:pointer;font-weight:bold;display:none;">Install App</button>

            </div>
        </div>


        <div class="app">

            <!-- LEFT PANEL -->
            <div class="left card">
                <h2>Add Expense</h2>

                <div class="form-row">
                    <input id="title" class="input" placeholder="Title">
                    <input id="amount" class="input" type="number" placeholder="Amount">
                </div>

                <div class="form-row">
                    <select id="category" class="select">
            <option>Food</option>
            <option>Transport</option>
            <option>Shopping</option>
            <option>Bills</option>
            <option>Entertainment</option>
            <option>Other</option>
          </select>

                    <input id="date" class="input" type="date">
                </div>

                <button class="btn" onclick="addExpense()">Add</button>

                <h3>Summary</h3>
                <div class="summary">
                    <div class="sum-box">
                        <h4>Total</h4>
                        <p id="total">0</p>
                    </div>
                    <div class="sum-box">
                        <h4>Month</h4>
                        <p id="monthTotal">0</p>
                    </div>
                    <div class="sum-box">
                        <h4>Items</h4>
                        <p id="count">0</p>
                    </div>
                </div>

                <!-- Export controls (Option 1 - keep inside left panel) -->
                <div class="card" style="margin-top:14px;">
                    <h3>Export</h3>

                    <!-- filters -->
                    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px;">
                        <input type="date" id="exportFrom" class="input" style="max-width:160px;" />
                        <input type="date" id="exportTo" class="input" style="max-width:160px;" />
                        <select id="exportCategory" class="input" style="max-width:180px;">
              <option value="">All categories</option>
              <option>Food</option>
              <option>Transport</option>
              <option>Shopping</option>
              <option>Entertainment</option>
              <option>Bills</option>
              <option>Other</option>
            </select>
                    </div>

                    <div style="display:flex;gap:12px;">
                        <button id="btnExportPDF" class="btn" style="max-width:160px;">Export PDF</button>
                        <button id="btnExportWord" class="btn" style="max-width:160px;background:linear-gradient(90deg,#ff9a9e,#ff2ec4);">Export Word</button>
                    </div>
                </div>

                <!-- Import / quick-export json (optional) -->
                <div style="display:flex;gap:10px;margin-top:10px;">
                    <button class="btn" onclick="exportUserData()" style="width:auto;padding:8px 12px;">Export JSON</button>
                    <label class="btn" style="width:auto;padding:8px 12px;cursor:pointer;">
            Import JSON
            <input type="file" id="importFile" accept=".json" style="display:none" onchange="importUserData(event)">
          </label>
                </div>

            </div>

            <!-- RIGHT PANEL -->
            <div class="right">
                <div class="charts">
                    <div class="chart-card card">
                        <h4>Monthly Trend</h4>
                        <canvas id="lineChart" height="160"></canvas>
                    </div>

                    <div class="chart-card card">
                        <h4>Category Distribution</h4>
                        <canvas id="pieChart" height="160"></canvas>
                    </div>
                </div>

                <div class="chart-card card bar-box">
                    <h4>Category Bar</h4>
                    <canvas id="barChart" height="120"></canvas>
                </div>
                <!-- ===========================
   TOTAL EXPENDITURE SECTION
=========================== -->
                <div class="card chart-card total-exp-card">

                    <h4>Total Expenditure</h4>

                    <!-- Toggle Buttons -->
                    <div class="total-toggle">
                        <button class="toggle-btn active" data-mode="daily">Daily</button>
                        <button class="toggle-btn" data-mode="monthly">Monthly</button>
                        <button class="toggle-btn" data-mode="yearly">Yearly</button>
                    </div>

                    <!-- Chart Wrapper -->
                    <div class="total-chart-wrapper">
                        <canvas id="totalTrendChart"></canvas>
                    </div>

                </div>



                <h3>Expenses</h3>
                <div id="list" class="expense-list card" style="padding:12px;"></div>
            </div>

        </div>
    </div>

    <!-- Delete Modal (simple) -->
    <div id="deleteModal" class="modal" style="display:none;position:fixed;inset:0;align-items:center;justify-content:center;background:rgba(0,0,0,0.5);z-index:1500">
        <div style="background:linear-gradient(180deg,#0b0b10,#07060b);padding:18px;border-radius:10px;min-width:320px;border:1px solid rgba(255,255,255,0.04);">
            <h3 style="margin-top:0">Delete Expense?</h3>
            <p style="opacity:0.85">This action cannot be undone.</p>
            <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:12px;">
                <button id="cancelDelete" class="btn" style="background:rgba(255,255,255,0.06);color:#eaf7ff">Cancel</button>
                <button id="confirmDelete" class="btn" style="background:#ff4e66">Delete</button>
            </div>
        </div>
    </div>

    <!-- app.js (contains all logic) -->
    <script src="app.js"></script>


</body>

</html>